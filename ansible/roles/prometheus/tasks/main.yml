---
-   name: Create default folder for prometheus
        file: "state=directory path={{ monitoring_directory }}"
-   name: Download prometheus from github
        get_url:
            url: "https://github.com/prometheus/prometheus/releases/download/v{{ prometheus_version }}/prometheus-{{ prometheus_version }}.linux-amd64.tar.gz"
            dest: "{{ monitoring_directory }}"
            mode: '0440'
-   name: Extracting prometheus
        unarchive:
            src: "prometheus-{{ prometheus_version }}.linux-amd64.tar.gz"
            dest: "{{ monitoring_directory }}"
-   name: Enter new folder
    command: "cd prometheus-{{ prometheus_version }}.linux-amd64/"

# Replace prometheus-{{ prometheus_version }}.linux-amd64/prometheus.yml
# with new config inside templates and start it in the backgorund